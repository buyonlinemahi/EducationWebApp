!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.braintree||(e.braintree={})).client=t()}}(function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(t){var n=e[a][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function r(t){var e,n;if(t=t||{},e=JSON.stringify(t),n=t.gatewayConfiguration,!n)throw new a({type:a.types.INTERNAL,message:"Missing gatewayConfiguration."});["assetsUrl","clientApiUrl","configUrl"].forEach(function(t){if(t in n&&!i(n[t]))throw new a({type:a.types.MERCHANT,message:"Invalid "+t+"."})}),this.getConfiguration=function(){return JSON.parse(e)},this._request=o,this._baseUrl=t.gatewayConfiguration.clientApiUrl+"/v1/",this._configuration=this.getConfiguration(),this.toJSON=this.getConfiguration}var o=t("./request"),i=t("../lib/is-whitelisted-domain"),a=t("../lib/error"),s=t("../lib/add-metadata"),u=t("../lib/deferred");r.prototype.request=function(t,e){var n;return t.method?t.endpoint||(n="options.endpoint is required."):n="options.method is required.",n?(e=u(e),void e(new a({type:a.types.MERCHANT,message:n}))):void this._request({url:this._baseUrl+t.endpoint,method:t.method,data:s(this._configuration,t.data),timeout:t.timeout},e)},e.exports=r},{"../lib/add-metadata":12,"../lib/deferred":15,"../lib/error":17,"../lib/is-whitelisted-domain":18,"./request":7}],2:[function(t,e,n){(function(n){"use strict";function r(t,e){var r,c,f,l,d=a(),p={merchantAppId:n.location.host,platform:s.PLATFORM,sdkVersion:s.VERSION,source:s.SOURCE,integration:s.INTEGRATION,integrationType:s.INTEGRATION,sessionId:d};try{c=u(t.authorization)}catch(y){return void e(new o({type:o.types.MERCHANT,message:"Authorization is invalid. Make sure your client token or tokenization key is valid."}))}f=c.attrs,l=c.configUrl,f._meta=p,f.braintreeLibraryVersion=s.BRAINTREE_LIBRARY_VERSION,i({url:l,method:"GET",data:f},function(n,i){return n?void e(new o({type:o.types.NETWORK,message:"Cannot contact the gateway at this time.",details:n})):(r={authorization:t.authorization,analyticsMetadata:p,gatewayConfiguration:i},void e(null,r))})}var o=t("../lib/error"),i=t("./request"),a=t("../lib/uuid"),s=t("../lib/constants"),u=t("../lib/create-authorization-data");e.exports={getConfiguration:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/constants":13,"../lib/create-authorization-data":14,"../lib/error":17,"../lib/uuid":23,"./request":7}],3:[function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e)throw new o({type:o.types.MERCHANT,message:"create must include a callback function."});return e=u(e),t.authorization?void a(t,function(t,n){var r;if(t)return void e(t);try{r=new i(n)}catch(o){return void e(o)}e(null,r)}):void e(new o({type:o.types.MERCHANT,message:"options.authorization is required."}))}var o=t("../lib/error"),i=t("./client"),a=t("./get-configuration").getConfiguration,s="3.0.0-beta.10",u=t("../lib/deferred");e.exports={create:r,VERSION:s}},{"../lib/deferred":15,"../lib/error":17,"./client":1,"./get-configuration":2}],4:[function(t,e,n){(function(n){"use strict";function r(){return f?new XMLHttpRequest:new XDomainRequest}function o(t,e){var n,o,l=(t.method||"GET").toUpperCase(),d=t.url,p=t.data||{},y=null==t.timeout?6e4:t.timeout,g=r(),h=a(e||Function.prototype);"GET"===l&&(d=i.queryify(d,p),p=null),f?g.onreadystatechange=function(){4===g.readyState&&(n=g.status,o=u(g.responseText),429===n?h(c.errors.RATE_LIMIT_ERROR,null,429):n>=400?h(o||c.errors.UNKNOWN_ERROR,null,n):0>=n?h(o||c.errors.UNKNOWN_ERROR,null,500):h(null,o,n))}:(g.onload=function(){h(null,u(g.responseText),g.status)},g.onerror=function(){h(c.errors.UNKNOWN_ERROR,null,g.status)},g.onprogress=function(){},g.ontimeout=function(){h(c.errors.TIMEOUT_ERROR,null,500)}),g.open(l,d,!0),g.timeout=y,f&&"POST"===l&&g.setRequestHeader("Content-Type","application/json");try{g.send(s(l,p))}catch(m){}}var i=t("../../lib/querystring"),a=t("../../lib/once"),s=t("./prep-body"),u=t("./parse-body"),c=t("./constants"),f=n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest;e.exports={request:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/once":20,"../../lib/querystring":22,"./constants":5,"./parse-body":10,"./prep-body":11}],5:[function(t,e,n){"use strict";e.exports={errors:{UNKNOWN_ERROR:"Unknown error.",TIMEOUT_ERROR:"Request timed out waiting for a reply.",INVALID_TIMEOUT:"Timeout must be a number.",RATE_LIMIT_ERROR:"You are being rate-limited; please try again in a few minutes."}}},{}],6:[function(t,e,n){(function(t){"use strict";e.exports=function(){return t.navigator.userAgent}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){"use strict";function r(){return null==o&&(o=!(u()&&/MSIE\s(8|9)/.test(s()))),o}var o,i=t("./jsonp-driver"),a=t("./ajax-driver"),s=t("./get-user-agent"),u=t("./is-http");e.exports=function(){var t=r()?a.request:i.request;t.apply(null,arguments)}},{"./ajax-driver":4,"./get-user-agent":6,"./is-http":8,"./jsonp-driver":9}],8:[function(t,e,n){(function(t){"use strict";e.exports=function(){return"http:"===t.location.protocol}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){(function(n){"use strict";function r(){}function o(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function i(t,e){var r=document.createElement("script"),o=!1;return r.src=t,r.async=!0,r.onerror=function(){n[e]({message:l.errors.UNKNOWN_ERROR,status:500})},r.onload=r.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,r.onload=r.onreadystatechange=null)},r}function a(t){try{delete n[t]}catch(e){n[t]=null}}function s(t,e){y[e]=setTimeout(function(){y[e]=null,n[e]({error:l.errors.TIMEOUT_ERROR,status:500}),n[e]=function(){a(e)}},t)}function u(t,e,i){e=e||r,n[i]=function(n){var r=n.status||500,s=null,u=null;delete n.status,r>=400?s=n:u=n,a(i),o(t),clearTimeout(y[i]),e(s,u,r)}}function c(t,e){var n,r="callback_json_"+d().replace(/-/g,""),o=t.url,a=t.data,c=(t.method||"GET").toUpperCase(),l=null==t.timeout?6e4:t.timeout;o=p.queryify(o,a),o=p.queryify(o,{_method:c,callback:r}),n=i(o,r),u(n,e,r),s(l,r),f||(f=document.getElementsByTagName("head")[0]),f.appendChild(n)}var f,l=t("./constants"),d=t("../../lib/uuid"),p=t("../../lib/querystring"),y={};e.exports={request:c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/querystring":22,"../../lib/uuid":23,"./constants":5}],10:[function(t,e,n){"use strict";e.exports=function(t){try{t=JSON.parse(t)}catch(e){}return t}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){if("string"!=typeof t)throw new Error("Method must be a string");return"get"!==t.toLowerCase()&&null!=e&&(e="string"==typeof e?e:JSON.stringify(e)),e}},{}],12:[function(t,e,n){"use strict";function r(t,e){var n,r=e?i(e):{},s=o(t.authorization).attrs,u=i(t.analyticsMetadata);r.braintreeLibraryVersion=a.BRAINTREE_LIBRARY_VERSION;for(n in r._meta)r._meta.hasOwnProperty(n)&&(u[n]=r._meta[n]);return r._meta=u,s.tokenizationKey?r.tokenizationKey=s.tokenizationKey:r.authorizationFingerprint=s.authorizationFingerprint,r}var o=t("./create-authorization-data"),i=t("./json-clone"),a=t("./constants");e.exports=r},{"./constants":13,"./create-authorization-data":14,"./json-clone":19}],13:[function(t,e,n){"use strict";var r="3.0.0-beta.10",o="web";e.exports={ANALYTICS_REQUEST_TIMEOUT_MS:2e3,INTEGRATION_TIMEOUT_MS:6e4,VERSION:r,INTEGRATION:"custom",SOURCE:"client",PLATFORM:o,BRAINTREE_LIBRARY_VERSION:"braintree/"+o+"/"+r}},{}],14:[function(t,e,n){"use strict";function r(t){return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(t)}function o(t){var e=t.split("_"),n=e[0],r=e.slice(2).join("_");return{merchantId:r,environment:n}}function i(t){var e,n,i={attrs:{},configUrl:""};return r(t)?(n=o(t),i.attrs.tokenizationKey=t,i.configUrl=s[n.environment]+"/merchants/"+n.merchantId+"/client_api/v1/configuration"):(e=JSON.parse(a(t)),i.attrs.authorizationFingerprint=e.authorizationFingerprint,i.configUrl=e.configUrl),i}var a=t("../lib/polyfill").atob,s={production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"};e.exports=i},{"../lib/polyfill":21}],15:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=arguments;setTimeout(function(){t.apply(null,e)},1)}}},{}],16:[function(t,e,n){"use strict";function r(t,e){return e=null==e?"":e,t.reduce(function(t,n){return t[n]=e+n,t},{})}e.exports=r},{}],17:[function(t,e,n){"use strict";function r(t){if(!r.types.hasOwnProperty(t.type))throw new Error(t.type+" is not a valid type.");if(!t.message)throw new Error("Error message required.");this.message=t.message,this.type=t.type,this.details=t.details}var o=t("./enumerate");r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.types=o(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),e.exports=r},{"./enumerate":16}],18:[function(t,e,n){"use strict";function r(t){var e,n;return t=t.toLowerCase(),/^https:/.test(t)?(o=o||document.createElement("a"),o.href=t,e=o.hostname.split("."),n=e.slice(-2).join("."),i.hasOwnProperty(n)):!1}var o,i={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,localhost:1};e.exports=r},{}],19:[function(t,e,n){"use strict";e.exports=function(t){return JSON.parse(JSON.stringify(t))}},{}],20:[function(t,e,n){"use strict";function r(t){var e=!1;return function(){e||(e=!0,t.apply(null,arguments))}}e.exports=r},{}],21:[function(t,e,n){(function(t){"use strict";function n(t){var e,n,r,o,i,a,s,u,c=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";if(!c.test(t))throw new Error("Non base64 encoded input passed to window.atob polyfill");u=0;do o=f.indexOf(t.charAt(u++)),i=f.indexOf(t.charAt(u++)),a=f.indexOf(t.charAt(u++)),s=f.indexOf(t.charAt(u++)),e=(63&o)<<2|i>>4&3,n=(15&i)<<4|a>>2&15,r=(3&a)<<6|63&s,l+=String.fromCharCode(e)+(n?String.fromCharCode(n):"")+(r?String.fromCharCode(r):"");while(u<t.length);return l}var r="function"==typeof t.atob?t.atob:n;e.exports={atob:r,_atob:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e,n){(function(t){"use strict";function n(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function o(e){var n,r;return e=e||t.location.href,/\?/.test(e)?(n=e.replace(/#.*$/,"").replace(/^.*\?/,"").split("&"),r=n.reduce(function(t,e){var n=e.split("="),r=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]);return t[r]=o,t},{})):{}}function i(t,e){var n,o,a,s=[];for(a in t)t.hasOwnProperty(a)&&(o=t[a],n=e?r(t)?e+"[]":e+"["+a+"]":a,"object"==typeof o?s.push(i(o,n)):s.push(encodeURIComponent(n)+"="+encodeURIComponent(o)));return s.join("&")}function a(t,e){return t=t||"",null!=e&&"object"==typeof e&&n(e)&&(t+=-1===t.indexOf("?")?"?":"",t+=-1!==t.indexOf("=")?"&":"",t+=i(e)),t}e.exports={parse:o,stringify:i,queryify:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(t,e,n){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}e.exports=r},{}]},{},[3])(3)});
